<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive 3D documentation for Newflows platform - Templates, Workflows, and Boards">
    <meta name="author" content="Newflows">
    <title>Newflows Documentation - Interactive 3D Experience</title>

    <!-- Preconnect to CDNs for performance -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Highlight.js for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">

    <!-- Main Styles -->
    <link rel="stylesheet" href="src/styles/main.css">
    <link rel="stylesheet" href="src/styles/components.css">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìö</text></svg>">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <i class="fas fa-cube fa-spin"></i>
            </div>
            <h2 class="loading-title">Preparing Your Documentation Experience</h2>
            <div class="loading-bar">
                <div class="loading-progress" id="loading-progress"></div>
            </div>
            <p class="loading-text" id="loading-text">Initializing 3D environment...</p>
        </div>
    </div>

    <!-- Main Canvas for Three.js -->
    <canvas id="webgl-canvas"></canvas>

    <!-- UI Overlay -->
    <div id="ui-overlay" class="ui-overlay">
        <!-- Header -->
        <header class="doc-header">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-cube"></i>
                    <span>Newflows Docs</span>
                </div>
            </div>
            <div class="header-center">
                <nav class="breadcrumb" id="breadcrumb">
                    <span class="breadcrumb-item active">Platform Overview</span>
                </nav>
            </div>
            <div class="header-right">
                <button class="header-btn" id="search-trigger" aria-label="Search documentation" title="Search (Ctrl+K)">
                    <i class="fas fa-search"></i>
                </button>
                <button class="header-btn" id="theme-toggle" aria-label="Toggle theme" title="Toggle theme">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="header-btn" id="help-btn" aria-label="Help" title="Help">
                    <i class="fas fa-question-circle"></i>
                </button>
            </div>
        </header>

        <!-- Navigation Orb (3D floating navigation) -->
        <div class="nav-orb" id="nav-orb">
            <button class="orb-button" aria-label="Navigation menu">
                <i class="fas fa-compass"></i>
            </button>
            <div class="orb-menu hidden" id="orb-menu">
                <div class="orb-menu-item" data-island="overview">
                    <i class="fas fa-home"></i>
                    <span>Overview</span>
                </div>
                <div class="orb-menu-item" data-island="templates">
                    <i class="fas fa-cubes"></i>
                    <span>Templates</span>
                </div>
                <div class="orb-menu-item" data-island="workflows">
                    <i class="fas fa-project-diagram"></i>
                    <span>Workflows</span>
                </div>
                <div class="orb-menu-item" data-island="boards">
                    <i class="fas fa-columns"></i>
                    <span>Boards</span>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <button class="action-btn primary" id="tour-btn">
                <i class="fas fa-route"></i>
                <span>Start Tour</span>
            </button>
        </div>

        <!-- Search Modal -->
        <div class="search-modal hidden" id="search-modal">
            <div class="search-container">
                <div class="search-input-wrapper">
                    <i class="fas fa-search"></i>
                    <input
                        type="text"
                        class="search-input"
                        id="search-input"
                        placeholder="Search documentation... (Ctrl+K)"
                        autocomplete="off"
                    >
                    <button class="search-close" aria-label="Close search">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="search-results" id="search-results">
                    <div class="search-empty">
                        <i class="fas fa-search"></i>
                        <p>Type to search documentation</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Panel (slides in when content is selected) -->
        <div class="content-panel hidden" id="content-panel">
            <div class="panel-header">
                <h3 class="panel-title" id="panel-title">Content Title</h3>
                <button class="panel-close" id="panel-close" aria-label="Close panel">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="panel-body" id="panel-body">
                <!-- Content loaded dynamically -->
            </div>
        </div>

        <!-- Tour Controls (shown during guided tour) -->
        <div class="tour-controls hidden" id="tour-controls">
            <button class="tour-btn" id="tour-prev" aria-label="Previous step">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="tour-info">
                <span class="tour-step" id="tour-step">1 / 5</span>
                <p class="tour-description" id="tour-description">Welcome to Newflows!</p>
            </div>
            <button class="tour-btn" id="tour-next" aria-label="Next step">
                <i class="fas fa-arrow-right"></i>
            </button>
            <button class="tour-btn-secondary" id="tour-exit">Exit Tour</button>
        </div>

        <!-- Help Modal -->
        <div class="help-modal hidden" id="help-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Keyboard Shortcuts</h3>
                    <button class="modal-close" aria-label="Close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="shortcuts-grid">
                        <div class="shortcut-item">
                            <kbd>Ctrl</kbd> + <kbd>K</kbd>
                            <span>Open Search</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Esc</kbd>
                            <span>Close Panel/Modal</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Tab</kbd>
                            <span>Navigate Elements</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>‚Üê</kbd> <kbd>‚Üí</kbd>
                            <span>Navigate Islands</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>Space</kbd>
                            <span>Pause/Resume Tour</span>
                        </div>
                        <div class="shortcut-item">
                            <kbd>H</kbd>
                            <span>Toggle Help</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scene Transition Overlay -->
    <div class="scene-overlay" id="scene-overlay"></div>

    <!-- Libraries -->
    <!-- Three.js (ES6 Module) -->
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>

    <!-- GSAP for animations -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.4/dist/gsap.min.js"></script>

    <!-- Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked@11.0.0/marked.min.js"></script>

    <!-- Highlight.js for syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Main Application (ES6 Module) -->
    <script type="module" src="src/main.js"></script>
</body>
</html>
